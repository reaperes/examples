<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>cardinal spline</title>
  <style>
    body {
      padding: 50px;
      overflow-y: hidden;
    }
  </style>
</head>
<body>
  <div class="cardinal-curve"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.6.0/d3.js"></script>
  <script>
    const rawIntonationData = "2.4007675501735|2.5115974118299|2.570691783028|2.4817042389557|2.4121257282424|2.806080274117|3.7359417200446|4.2096891673761|3.449054689846|2.4330440814958|2.2863890000537|2.0994235691477|2.8356333242164|7.3290911946182|15.445431610698|28.493779617134|44.207930328044|56.630428843261|63.613597591583|68.241723650798|75.945147594227|88.470778809932|97.757496286757|98.412440758617|95.631281509678|94.765412323296|96.41618266914|98.878079216406|100|97.858871771367|91.033220125768|77.947093665255|58.857279758371|40.40637501022|29.170923621225|23.999379012353|24.296858114409|32.389184177118|46.041559385872|59.559360693843|67.127442404868|65.290478808602|54.733090280533|39.382194377745|27.758756132816|27.270935435321|29.2381582289|29.614200693872|31.250009851312|32.184739160804|32.764227506358|33.535138686087|30.771596177074|24.56971527168|18.426807379723|19.658487913284|35.160082137552|53.155729085906|63.82633740086|67.670609081991|68.076964574279|65.682541847927|60.603830691396|53.542651576083|45.352391094983|36.889253920437|27.71723966633|17.556987380746|9.1169614994928|4.5201206977635|2.856603919861|2.4705858578404|2.1694520685304|1.990673242871|2.2143687230232|2.3149947919909|2.522900374215|3.1052741815904|3.8895558929501|4.7978880378557|7.7740975560824|11.551811883555|12.579112503139|13.502061609436|21.23733369293|31.322036457989|36.821368873102|34.245228394728|26.233119958279|20.056266842978|17.388015367621|15.938593308331|15.8836405512|19.47825370654|28.81376880544|40.049776564957|47.369642471981|47.287911914097|39.120102016913|27.51376467302|19.184479454648|14.079914133355|9.6660734665358|6.0290651546865|5.8694861556874|14.349938892044|32.745382668935|55.309551941992|70.210177369239|73.92647058731|72.794776956031|72.568842896711|75.119029668869|78.333925406167|79.808659870783|79.873038767803|80.158599180548|80.343352773677|78.415158457425|73.561403913099|65.841563801485|54.450272939908|40.008287587746|25.804773885085|14.601588356394|8.5447614600241|6.0534083213758|5.0681563693972|6.0750530153333|6.8857292645679|6.3496533428677|4.6795055389371|3.6779008246917|5.2468656054189|11.859051356411|24.55274751213|38.699013130559|47.342355545048|49.215300759934|49.169974338306|50.751637339974|52.716934680394|53.223099023992|52.179501259129|50.466115561791|49.18129123686|47.774921449967|45.29498393048|42.101735933397|38.587815675094|33.903939760977|26.89056657436|19.233130911123|13.126530386607|8.0881663535128|4.190346969255|2.7954391520534|4.6505049922553|9.4787265056525|17.866933388882|33.254483312185|48.70235617845|55.699332532403|55.917816086147|55.106125232762|55.296824918419|54.2875212189|49.865486905785|42.461944448285|33.06739812873|22.261273762327|11.473608106623|4.0220738075596|2.0622918700368|2.3147284360562|2.6040540039047|2.9559703525415|3.3903924858032|4.2223096449267|5.7438104073569|6.2466921083281|5.0553361340162|4.6553255567561|6.4706824734303|12.645909617269|22.431075926019|31.521001386095|38.027683336142|42.24253468656|44.299627070591|44.704391650729|43.161862213125|39.527575503669|34.809676057345|30.587918660461|26.999140874423|23.823197202659|21.186050124694|19.520910421585|19.00421710195|18.194916447411|17.072612984653|16.371937376801|15.56682662041|14.635249256361|14.728209338129|15.146069648354|15.034880857392|14.809826308943|14.264283259697|13.039172024423|10.701632542895|7.4713678018507|5.6091884596262|6.6320856147505|7.1039506943024|5.8701615673564|4.4647804640694|5.0350066203687|5.9101698266523|4.9488007647367|3.367829099181|2.6263345811576|2.446808437577|2.5721723367733|2.6859630687865|2.5494710295087|2.8707805238618|3.8251634245835|4.052751163534|3.5493604640694|3.0154358198316|2.5124645552636|2.6770104667749|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000|1.00000";
    const intonations = rawIntonationData.split('|').map(Number);
    const minIntonation = d3.min(intonations);
    const maxIntonation = d3.max(intonations);

    const svgWidth = window.innerWidth - 100;
    const svgHeight = window.innerHeight - 100;

    const xLinearScale = d3.scaleLinear()
      .domain([0, intonations.length])
      .range([0, svgWidth]);

    const yLinearScale = d3.scaleLinear()
      .domain([minIntonation, maxIntonation])
      .range([0, svgHeight]);

    const svg = d3.select('.cardinal-curve')
      .append('svg')
      .attr('width', svgWidth)
      .attr('height', svgHeight);

    const cardinalCurveLine = d3.line()
      .x((v, idx) => xLinearScale(idx))
      .y(v => yLinearScale(v))
      .curve(d3.curveCatmullRomOpen); // https://github.com/d3/d3-shape/blob/master/README.md#curves

    svg.append('path')
      .datum(intonations)
      .attr('d', cardinalCurveLine)
      .attr('fill', 'none')
      .attr('stroke', 'black');

  </script>
</body>
</html>